apiVersion: v1
kind: Pod
metadata:
  name: federated-k8s
spec:
  serviceAccountName: dev-workload-ksa # This is the name of the KSA created by the federated-k8s-service-account function
  containers:
    - name: app
      image: python:3.11
      command: ["sleep", "infinity"]
      env:
        - name: GKE_CLUSTER_ENDPOINT
          valueFrom:
            secretKeyRef:
              name: dev
              key: endpoint
        - name: GKE_CLUSTER_CA
          valueFrom:
            secretKeyRef:
              name: dev
              key: ca.crt
